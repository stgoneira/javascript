<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<meta name="description" content="Curso de Javascript Fullstack">
	<meta name="author" content="Santiago Neira">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

	<title>Curso Javascript</title>

	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/blood.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/monokai.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css"
		integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous" />

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>

	<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<h1>Javascript</h1>
				<h3><a href="#">Clase 3</a></h3>
				<p>
					<small>Creado por <a target="_blank" href="https://github.com/stgoneira/javascript">Santiago
							Neira</a><br /><br />
						<a target="_blank"
							href="?print-pdf"><i class="fas fa-print"></i></a>
					</small>
				</p>
			</section>

			<section>
				<section data-markdown>
					## [Clase Anterior]()

					- DOM API
					- Estructuras condicionales
					- Loops 
					- Strings 
					- Arrays 				
				</section>
				<section data-markdown>
						## [Clase Anterior]()
							
						- Algoritmo RUT 
						- Ejercicios DOM y RUT 
						- Faltó cubrir:
							* Switch
							* Break & Continue
						- Faltó realizar ejercicio final del RUT
		
					</section>				
			</section>
			<section data-markdown>
				## [Objetivos]() 

				- Utilizar clase Date 
				- Entender POO en los distintos estándares
					* ES5
					* ES6
				- Utilizar nuevas funciones de la API DOM
				- Conocer y Utilizar Bootstrapp CSS 
				- Conocer Typescript 
			</section>
			
			<!-- Fechas -->
			<section>
				<section data-markdown="">
					## [Fechas]()  

					- La clase Date representa un momento en el tiempo
					- En un formato que es independiente a la plataforma
					- Contiene un número que representa los milisegundos desde el 1ero de Enero 1970 UTC - [Unix Timestamp](https://es.wikipedia.org/wiki/Tiempo_Unix)
				</section>
				<section data-markdown="">
					## Constructores 

					```javascript
					new Date();
					new Date(value); // value: timestamp
					new Date(dateString); // ISO-8601 o IETF Compliant RFC 2822
					new Date(year, monthIndex [, day [, hours [, minutes [, seconds [, milliseconds]]]]]);
					```
				</section>
				<section data-markdown="">
					## Constructores 

					```javascript
					const a = new Date();
					const b = new Date(2019, 1, 1); // año yyyy, mes: 0-11, día: 1-31
					const c = new Date('1987-12-18'); // ISO 8601
					console.log(a.toString());
					console.log(b.toString());
					console.log(c.toString());
					```
				</section>
				<section data-markdown="">
					## [Funciones]() 

					```javascript 
					date.getMonth(); // mes 0-11 
					date.getDate(); // día del mes 1-31 
					date.getDay(); // día de la semana 0-6, depende del locale 
					date.getFullYear(); // año en formato YYYY
					date.getHours(); // hora en 0-23
					date.getSeconds(); // segundos 0-59  
					date.getMilliseconds(); // milisegundos 0-999
					```
				</section>
				<section data-markdown="">
					## [Math Dates]() 

					```javascript
					let hoy = new Date();
					let vencimientoFactura = new Date();
					vencimientoFactura.setDate( hoy.getDate() + 30 ); // suma 30 días 
					console.log( vencimientoFactura );
					```
				</section>
			</section>
			<!-- END Fechas -->

			<!-- Copiando Valores -->
			<section>
				<section data-markdown="">
					## [Copiar]()
					- Por valor 
					- Por referencia
					- Clonar Objetos
				</section>
				<section data-markdown="">
					## Por valor 

					```javascript
					let num1 = 5; 
					let num2 = num1;
					num1 = 10;
					
					console.log("num1 = ", num1); // 10
					console.log("num2 = ", num2); // 5
					```
				</section>
				<section data-markdown="">
						## Por referencia 
	
						```javascript
						let obj1 = new Object(); 
						let obj2 = obj1;

						obj1.nombre = "Ramón";
												
						console.log("obj1 = ", obj1.nombre); // "Ramón"
						console.log("obj2 = ", obj2.nombre); // "Ramón"
						```
					</section>
					<section>
						<img src="contenido/images/obj-reference.png" style="height: 90%; width: auto;" />
					</section>
					<section data-markdown="">
						## Object.assign() 

						```javascript 
						let a = new Object();
						a.nombre = "Juan";
						a.id = 12345678;
						b = new Object();
						b = Object.assign(b, a);
						b.nombre = "Ramón";

						console.log( a );
						console.log( b );
						```
					</section>
			</section>			
			<!-- END Copiando Valores -->


			<!-- Objetos Simples -->
			<section>
				<section data-markdown="">
					## [Objetos Sencillos]() 
					
					- JS permite crear objetos de manera sencilla
					- la creación de sus métodos y propiedades puede ser incremental
					- pero carece de estructura
					- y también carece de comprobación de tipos
				</section>
				
				<section data-markdown="">
					## [Sintaxis]()
					```javascript
					let person = new Object(); 
					person.name = "Nicolás";
					person.age = 31;

					// lo mismo que 
					let person = {
						name: "Nicolás",
						age: 31
					};
					```
				</section>
				<section data-markdown="">
					## [Sintaxis]() 
					```
					let rut = {
						rut: 12345678,
						dv: 5,
						format: function() {
							return `${this.rut}-${this.dv}`;
						}
					}
					rut.format(); // "12345678-5"
					rut.rut = 90999888;
					rut.format(); // "90999888-5"
					```
				</section>
				<section data-markdown="">
					## instanceof 

					```javascript
					let arr = [1,2,3];
					let obj = new Object();
					obj.nombre = "Juanito";
					let regex = /ab+c/;

					console.log( arr instanceof Array ); // true 
					console.log( obj instanceof Object ); // true 
					console.log( regex instanceof RegExp ); // true 
					console.log( arr instanceof Object ); // true 
					console.log( obj instanceof Array ); // false 
					```
				</section>
			</section>
			<!-- END Objetos Simples -->

			<!-- POO ES5 -->
			<section>
				<section data-markdown="">
					## [POO ES5]()

					- Uso de funciones para contener la clase
					- Uso de objeto prototype para disponibilizar función a todos las instancias 
					- En conjunción con la palabra clave new
					- Por convención los nombre de estas clases-funciones están Capitalizadas
				</section>
				<section data-markdown="">
					## Ejemplo POO ES5

					```javascript
					function Persona(nombre, apellido) {
						this.nombre = nombre;
						this.apellido = apellido;
						this.getNombreCompleto = function() { // uso función anónima 
							return `${this.nombre} ${this.apellido}`;
						}
					}
					let p = new Persona("Juan", "Valdés");
					console.log( p.getNombreCompleto() );
					```
				</section>
				<section data-markdown="">
						## Ejemplo prototype
	
						```javascript
						function Persona(nombre, apellido) {
							this.nombre = nombre;
							this.apellido = apellido;
						}
						// ¿ Qué pasa si no uso Prototype ?
						Persona.prototype.getNombreCompleto = function() {
							return `${this.nombre} ${this.apellido}`;
						};
						let p = new Persona("Juan", "Valdés");
						console.log( p.getNombreCompleto() );
						```
					</section>
				
			</section>
			<!-- END POO ES5 -->

			<!-- POO ES6 -->
			<section>
				<section data-markdown="">
					## [POO ES6]() 

					- ES6 permite usar la palabra clave "class" y "constructor"
					- A pesar que internamente funciona con prototypes igual que en ES5
					- Colocar propiedades en una clase es una característica [experimental](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes)
					 					
				</section>
				<section data-markdown="">
					```javascript
					class Factura {
						// constructor(string, string, integer) 
						constructor(proveedor, fecha, neto) {
							this.proveedor = proveedor;
							this.fecha = fecha;
							this.neto = neto;
						}
						set fecha(f) {
							this._fecha = new Date(f);
						}
						get fecha() {
							return this._fecha;
						}
						get iva() {
							return this.neto * 0.19;
						}
						get total() {
							return this.neto * 1.19;
						}
						mostrarResumen() {
							let fecha = this.fecha.toLocaleDateString();
							console.log(`${this.proveedor} | ${fecha} | NETO: ${this.neto} IVA: ${this.iva} TOTAL: ${this.total}`);
						}
					}
					let f = new Factura('Huawei', '2019-12-03', 100000);
					f.mostrarResumen();
					```
				</section>
				<section data-markdown="">
					## POO ES6 

					```javascript
					class Persona {
						constructor(nombre, rut) {
							this.nombre = nombre;
							this.rut = rut;
							this._dv;
						}
						get rut() {
							return this._rut;
						}
						set rut(rut) {
							if( Number.isInteger(rut) && rut>1 ) {
								this._rut = rut;
							} else {
								console.error("El RUT debe ser numérico y mayor que 0.");
							}
						}
						get dv() {
							if(this._dv == undefined) { 
								this._dv = this.calcularDv();
							} 
							return this._dv;
						}
						calcularDv() {
							return 'k'; // aca se debiese calcular el dígito verificador
						}
						format() {
							const formatRut = this.rut.toLocaleString("es-CL");
							const formatDv = this.dv.toUpperCase(); 
							return `${this.nombre} ${formatRut}-${formatDv}`;
						}
					}
					```
				</section>
				<section data-markdown="">
					## POO ES6 vs ES5

					```javascript
					function PersonaES5(nombre, rut) {
						this.nombre = nombre;
						this._rut = rut; // al final se checkea con setRut()
						this._dv;
					
						this.getRut = function() {
							return this._rut;
						};
						this.setRut = function(rut) {
							if( Number.isInteger(rut) && rut>1 ) {
								this._rut = rut;
							} else {
								console.error("El RUT debe ser numérico y mayor que 0.");
							}
						};
						this.getDv = function() {
							if(this._dv == undefined) { 
								this._dv = this.calcularDv();
							} 
							return this._dv;
						}
						this.calcularDv = function() {
							return 'k'; // aca se debiese calcular el dígito verificador
						};
						this.format = function() {
							const formatRut = this.getRut().toLocaleString("es-CL");
							const formatDv = this.getDv().toUpperCase(); 
							return `${this.nombre} ${formatRut}-${formatDv}`;
						}
					
						// checks 
						this.setRut(rut);
					}
					```
				</section>
			</section>
			<!-- END POO ES6 -->

			<section>
				<section data-markdown="">
					## [Más API-DOM]()

					```javascript
					document.querySelector('div p'); // devuelve el 1er elemento si encuentra varios 
					document.querySelectorAll('div p'); // devuelve la lista completa

					element.addEventListener(event, function(){}); // agrega un listener al evento indicado 
					// ejemplos de eventos click, blur, etc
					```
				</section>
				<section data-markdown="">
					## Ejemplo 

					```html 
					&lt;div&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;p&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;Parrafo uno&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/p&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/div&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&lt;div&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;p&gt;P&aacute;rrafo dos&lt;/p&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;p&gt;P&aacute;rrafo tres&lt;/p&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/div&gt;
					```
					```javascript 
					document.querySelectorAll('div p').forEach(function(el){
						el.style.color = 'pink';
					});
					document.querySelector('div p').style.color = 'red';
					```
				</section>
				<section data-markdown="">
					## [Ejercicio]() 

					- Agregue un botón en HTML 
					- Envuelva el código de cambio de color en una función 
					- Ejecute la función anterior al clickear el botón 
				</section>
			</section>
			
			<!-- Bootstrap -->
			<section>
				<section data-markdown="">
					## [Bootstrap](https://getbootstrap.com/) 

					- Formularios
					- Alertas 
					- Otros
				</section>
				<section data-markdown="">
					## [Ejemplos Guiados]() 

				</section>
			</section>

			<section>
				<section data-markdown="">
					## [Ejercicio - p1]() 
					- Cree una clase Factura ES5 ó ES6
					- Utilice los campos: rut, proveedor, fecha, fechaVencimiento, neto, iva, total
					- La fecha de vencimiento la calculará el programa, todas vencen a los sgtes 30 días 
					- El IVA y Total deben ser calculados por el programa (evento blur)
					- continua ...
				</section>
				<section data-markdown="">
					## [Ejercicio - p2]() 
					- Cree un formulario para introducir facturas
					- Cree una tabla que contendrá las facturas 
					- Incorpore la funcionalidad para agregar y eliminar elementos
					- Utilice mensajes alert de Bootstrap
				</section>
			</section>

			<section data-markdown="">
				## [Typescript](https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html)
			</section>

			
			
		</div><!-- end .slides -->
	</div><!-- end .reveal -->

	<script src="js/reveal.js"></script>

	<script>

		Reveal.initialize({
			controls: true,
			progress: true,
			center: true,
			hash: true,

			transition: 'slide', // none/fade/slide/convex/concave/zoom

			dependencies: [
				{ src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
				{ src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
				{ src: 'plugin/highlight/highlight.js', async: true },
				{ src: 'plugin/search/search.js', async: true },
				{ src: 'plugin/zoom-js/zoom.js', async: true },
				{ src: 'plugin/notes/notes.js', async: true }
			]
		});
	</script>
</body>

</html>