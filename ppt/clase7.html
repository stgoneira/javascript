<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<meta name="description" content="Curso de Javascript Fullstack">
	<meta name="author" content="Santiago Neira">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

	<title>Curso Javascript</title>

	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/blood.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/monokai.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css"
		integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous" />

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>

	<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<h1>Javascript</h1>
				<h3><a href="#">Clase 7</a></h3>
				<p>
					<small>Creado por <a target="_blank" href="https://github.com/stgoneira/javascript">Santiago
							Neira</a><br /><br />
						<a target="_blank" href="?print-pdf"><i class="fas fa-print"></i></a>
					</small>
				</p>
			</section>

			<section data-markdown="">
				## [Clase Anterior]()

				- Cookies
				- Web Storage API 
				- Herencia
			</section>

			<section>
				<section data-markdown="">
					## [Objetivos - Parte I]()

					- Node.js 
					- JSON 
					- Proyectos 
					- Versionamiento 
				</section>

				<section data-markdown="">
					## [Objetivos - Parte II]()

					- Require 
					- Scripts
					- Browserify
					- Express
					- Testing
				</section>
			</section>

			<section>
				<section data-markdown="">
					## [NodeJS]()

					- JS llevado a [entorno fuera del browser](), usado en:
						* lado del [servidor]() 
						* entorno [scripting]() 
						* aplicaciones de [escritorio]() 
						* apps [móviles]()
						* entre otros 
					- Evita [bloqueos](), funciona como un [Loop de Eventos]()
				</section>
				<section data-markdown="">
					## [NodeJS]()

					- Lanzamientos de nuevas [versiones cada 6 meses]() y [6 meses de soporte](), versiones representadas por números [impares]() (9, 11, etc)
					- Números [pares]() representan versiones Long Term Support [(LTS)]() (10, 12, etc)
					- SW en [producción]() se recomienda que utilice versiones [LTS]()

					Fuente: [https://nodejs.org/en/about/releases/](https://nodejs.org/en/about/releases/)
				</section>
			</section>

			<section>
				<section data-markdown="">
					## [JSON]()

					- Significa [Javascript Object Notation]() (JSON)
					- Es una sintaxis para [almacenar e intercambiar datos]().
					- Es texto escrito con notación de Javascript
				</section>
				<section data-markdown="">
					## [JSON]()

					- JSON es un formato de intercambio [liviano]()
					- [Fácilmente convertible]() entre texto y objeto en JS 
					- [Fácil de entender]() y utilizado en varios lenguajes, no solo en JS 
				</section>
				<section data-markdown="">
					## Sintaxis JSON 

					```javascript
					{
						nombre: 'Raúl Soto',
						edad: 31,
						ciudad: 'Concepcion',
						activo: true,
						correo: 'rauls@123.cl'
					}
					```
				</section>
				<section data-markdown="">
					## [Ejemplo Almacenamiento]()

					```javascript
					let obj = {nombre: 'Patricio', edad: 25, ciudad: 'Santiago'};
					let textJson = JSON.stringify( obj );

					// específico entorno browser 
					localStorage.setItem('persona', textJson);
					```
				</section>
				<section data-markdown="">
					## [Ejemplo Recuperación]() 

					```javascript
					// específico entorno browser 
					let textJson = localStorage.getItem('persona');

					let obj = JSON.parse( textJson );
					console.log( obj );					
					```
				</section>
			</section>

			<section>
				<section data-markdown="">
					## [Proyectos]()

					En esta sección veremos:
					- Creación de proyectos con NPM 
					- Comprender el archivo package.json 
					- Agregar paquetes al proyecto 
					- Entender el versionamiento y la sintaxis para expresarlo en npm
				</section>
				<section data-markdown="">
					## [Proyectos]() 

					```bash
					$ cd proyecto 

					$ npm init -y 

					$ code package.json
					```
				</section>
				<section data-markdown="">
					## [package.json]() 

					```json 
					{
						"name": "proyecto",
						"version": "1.0.0",
						"description": "",
						"main": "index.js",
						"scripts": {
						  "test": "echo \"Error: no test specified\" && exit 1"
						},
						"keywords": [],
						"author": "",
						"license": "ISC"
					  }
					```
				</section>
				<section data-markdown="">
					## [Instalar Paquetes]()

					```bash 
					$ # instala módulo uniq como dependencia
					$ npm install uniq 

					# instala browserify solo para modo desarrollo 
					$ npm install browserify --save-dev
					```
				</section>
				<section data-markdown="">
					## package.json 

					```javascript
					{
						"name": "node-basico",
						"version": "1.0.0",
						"description": "",
						"main": "index.js",
						...
						"dependencies": {
						  "uniq": "^1.0.1"
						},
						"devDependencies": {
						  "browserify": "^16.5.0"
						}
					  }
					  
					```
				</section>
				<section data-markdown="">
					## [NPM]() 

					Consiste de 3 componentes: 
					- El sitio web [npmjs.com](http://npmjs.com)
					- La interfaz de línea de comandos [(CLI)]()
					- El registro: [BD del SW en JS]() y su Meta-Información
				</section>
				<section>
					<h2><a>Versionamiento</a></h2>
					<table style="font-size: 0.7em;">
						<thead>
						  <tr>
							<th>Code status</th>
							<th>Stage</th>
							<th>Rule</th>
							<th>Example version</th>
						  </tr>
						</thead>
						<tbody>
						  <tr>
							<td>First release</td>
							<td>New product</td>
							<td>Start with 1.0.0</td>
							<td>1.0.0</td>
						  </tr>
						  <tr>
							<td>Backward compatible bug fixes</td>
							<td>Patch release</td>
							<td>Increment the third digit</td>
							<td>1.0.1</td>
						  </tr>
						  <tr>
							<td>Backward compatible new features</td>
							<td>Minor release</td>
							<td>Increment the middle digit and reset last digit to zero</td>
							<td>1.1.0</td>
						  </tr>
						  <tr>
							<td>Changes that break backward compatibility</td>
							<td>Major release</td>
							<td>Increment the first digit and reset middle and last digits to zero</td>
							<td>2.0.0</td>
						  </tr>
						</tbody>
					  </table>

					  <!-- 
						Fuente: https://docs.npmjs.com/about-semantic-versioning
					  -->
				</section>
				<section data-markdown="">
					## [Versionamiento]()

					- Esquema: [major.minor.patch]() | ej. 2.1.15					
					- [Enlace para Pruebas](https://semver.npmjs.com/)
					- Sintaxis:
						* ~ 
						* ^ 
						* <>=
				</section>		
				<section data-markdown="">
					## [Uso de ~]()

					Use [~]() para incluir todas las versiones [iguales o mayores]() dentro del rango de la [misma versión menor]() 
						
					- Ej. con lodash [~4.16]()
					- [Incluye](): 4.16.0, 4.16.1, 4.16.2, etc 
					- [Excluye](): 4.17.0, 4.17.1, etc 

				</section>	
				<section data-markdown="">
					## [Uso de ^ (caret)]()

					Use [^]() para incluir todas las versiones [iguales o mayores]() dentro del rango de la [misma versión mayor]() 
						
					- Ej. con lodash [^4.16]()
					- [Incluye](): 4.16.0, 4.16.1, 4.16.*, 4.17.0, 4.17.1, 4.17.*, etc 
					- [Excluye](): 4.15.1, 4.15.*, 4.14, 5.0.*

				</section>		
				<section data-markdown="">
					## [Otras sintaxis]()

					- Uso de [>](), [<](), [=]() , [>=]() o [<=]()
					- rangos con [-]() 
					- versión específica, ej: [1.0.0-rc.1]()
					- Operador || (or). En el ejemplo sirve cualquiera de las 2 versiones descritas: ej. [4.17.3 || 4.17.4]()
				</section>
			</section>

			<section>
				<section data-markdown="">
					## Require 

					```javascript
					const uniq = require('uniq');
					const arr = [1, 1, 2, 2, 3, 5];
					uniq( arr );
					console.log( arr );
					```
				</section>				
				<section data-markdown="">
					## Browserify

					- [Browsers NO]() tienen el método [require()]() definido
					- [Node.js si]() tiene el método require().
					- [Browserify permite]() que el código con require [funcione]() en los browsers.
				</section>
				<section data-markdown="">
					## [NPX]()
					
					Ejecuta un comando de node instalado dentro del proyecto 
					y no de manera global.

					```bash
					$ npx browserify index.js -o dist/index.js 
					```
				</section>
				<section data-markdown="">
					## [Sección scripts]()

					```bash 
					$ npm i express # Node Web Application Framework
					$ npm i rimraf # remove dir & files multiplataforma 
					```

					```javascript
					...
					"scripts": {
						"dist": "browserify index.js -o dist/index.js",
						"start": "node server.js",
						"clean": "rimraf dist"
					  },
					...
					```

					```bash 
					$ npm run dist # corre la tarea dist del package.json 
					$ npm start # start y test no necesitan run
					$ # todos los demás scripts que no sean start necesitan run
					```
				</section>
				<section data-markdown="">
					## server.js 

					```javascript
					const express = require('express');
					const app = express();
					
					app.use( express.static('./') );
					
					app.listen(3000, () => {
						console.log('listening on port 3000');
					});
					
					```
				</section>
				<section data-markdown="">
					## [Probamos]()

					También podemos probar con el archivo sin browserify.

					```html
					&lt;!DOCTYPE html&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;html lang=&quot;en&quot;&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;head&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;meta charset=&quot;UTF-8&quot;&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;...&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;title&gt;Document&lt;/title&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/head&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;body&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;script src=&quot;dist/index.js&quot;&gt;&lt;/script&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/body&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/html&gt;
					```
				</section>
			</section>

			<section>				
				<section data-markdown="">
					## [Javascript Testing]()

					- Los 2 principales proyectos son:
						* Mocha 
						* Jasmine 
					- Ambos corren en el browser y en node.js 
					- En esta presentación revisaremos Mocha 
				</section>
				<section data-markdown="">
					## Setup

					```bash
					$ npm i mocha 					
					$ mkdir test # directorio para las pruebas
					```
					
					```javascript
					// package.json 
					...
					"scripts": {
						"test": "mocha"
					},
					...
					```
				</section>
				<section data-markdown="">
					## Ejemplo 

					```javascript
					// Matematicas.js 
					class Matematicas {
						static sumar(s1, s2) {
							return s1 + s2;
						}
					
						static restar(r1, r2) {
							return r1 - r2;
						}
					}
					
					module.exports = Matematicas;
					```
				</section>
				<section data-markdown="">
					## Ejemplo 

					```javascript
					// test/MatematicasTest.js 
					const assert = require('assert').strict;
					const Matematicas = require('../Matematicas');
					
					describe("Matematicas.js", () => {
						describe("sumar", () => {
							it("Debe sumar numbers", () => {
								assert.equal(  
									Matematicas.sumar(3, 5)
									, 8
								);
							});
							it("Debe sumar aunque sean strings", () => {
								assert.equal(  
									Matematicas.sumar("1", "2")
									, 3
								);
							});
						});
					
					});
					```
				</section>
				<section data-markdown="">
					## [Métodos Assert]()

					- assert.equal()
					- assert.notEqual()
					- assert.deepEqual() - para arrays, objetos
					- assert.notDeepEqual() - para arrays, objetos
					- [Enlace API](https://nodejs.org/api/assert.html)
				</section>				
			</section>
			
			<section>
				<section data-markdown="">
					## [Ejercicio]() 
	
					- Cree un proyecto para la lógica del RUT 
					- Cree una batería de pruebas, al menos 10 
					- Cree un 2do proyecto llamado Facturas					
					- Configure express para servir los archivos de manera estática
				</section>
				<section data-markdown="">
					## [Ejercicio - parte 2]() 	

					- Utilice el proyecto RUT para validar utilizando Browserify
					- Cree un 3er proyecto con express sobre otro puerto
					- Devuelva un JSON con las razones sociales y RUTs de los proveedores de manera estática 
					- Utilice los datos del JSON de proveedores desde el proyecto Facturas
				</section>
			</section>
			
			<section>
				<section data-markdown="">
					## Bonus 

					- Ejemplo para hacer funcionar Clima en Node.js y Browser 
					- Usando módulo cross-fetch
				</section>
			</section>

			

		</div><!-- end .slides -->
	</div><!-- end .reveal -->

	<script src="js/reveal.js"></script>

	<script>

		Reveal.initialize({
			controls: true,
			progress: true,
			center: true,
			hash: true,

			transition: 'slide', // none/fade/slide/convex/concave/zoom

			dependencies: [
				{ src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
				{ src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
				{ src: 'plugin/highlight/highlight.js', async: true },
				{ src: 'plugin/search/search.js', async: true },
				{ src: 'plugin/zoom-js/zoom.js', async: true },
				{ src: 'plugin/notes/notes.js', async: true }
			]
		});
	</script>
</body>

</html>
